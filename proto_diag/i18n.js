/* BellMate i18n runtime
 * - default language: zh-CN
 * - supported: zh-CN / en-US
 */
(function () {
  const dict = {
    "zh-CN": {
      app_name: "BellMate",
      nav_alarm: "闹钟",
      nav_plan: "计划",
      nav_me: "我的",
      nav_settings: "设置",
      account_entry: "账户入口",
      status_paused_today: "今日闹钟已暂停，明日 00:00 自动恢复",
      action_restore: "恢复",
      action_undo: "撤销",
      login_success: "登录成功",
      logout_success: "已退出登录",
      alarms_restored_today: "今日闹钟已恢复",
      alarms_paused_today: "今日闹钟已暂停，明日自动恢复",

      login_title: "登录",
      login_account: "账号密码",
      login_phone: "手机号",
      login_btn: "登录",
      login_phone_btn: "手机号登录",
      login_wechat: "微信登录",
      login_qq: "QQ登录",
      login_register: "注册账号",
      login_forgot: "忘记密码",
      login_skip: "暂不登录，先体验",
      login_back: "返回登录",
      field_account: "账号",
      field_password: "密码",
      field_phone: "手机号",
      field_code: "验证码",
      field_new_password: "新密码",
      field_password_hint: "至少6位",
      get_code: "获取验证码",
      register_title: "注册账号",
      register_submit: "提交注册",
      forgot_title: "忘记密码",
      forgot_submit: "重置密码",
      auth_login_title: "授权登录",
      auth_cancel: "取消",
      auth_confirm: "确认授权",
      auth_desc: "BellMate 正在申请读取基础账号资料。",
      auth_wechat_title: "微信授权登录",
      auth_qq_title: "QQ授权登录",
      invalid_phone_code: "请输入正确手机号和6位验证码",
      login_failed: "登录失败",
      register_invalid: "注册信息不完整",
      register_ok: "注册成功，请登录",
      reset_invalid: "重置信息不完整",
      reset_ok: "密码重置成功",

      alarm_page_title: "闹钟列表",
      alarm_page_subtitle: "点击编辑 / 长按多选删除 / AI叫醒",
      pull_refresh: "下拉刷新闹钟",
      pull_release: "松开刷新",
      refreshing: "刷新中...",
      add_alarm: "新增闹钟",
      new_alarm: "新增闹钟",
      edit_alarm: "编辑闹钟",
      alarm_time: "时间",
      alarm_label: "标签",
      alarm_repeat: "重复周期",
      repeat_daily: "每天",
      repeat_workday: "工作日",
      repeat_custom: "自定义星期",
      weekdays: "星期",
      alarm_ringtone: "铃声",
      ring_default: "默认铃声",
      ring_bird: "鸟鸣",
      ring_piano: "钢琴",
      ai_wake: "AI语音叫醒",
      ai_style: "语音风格",
      style_gentle: "温柔",
      style_energetic: "活力",
      style_serious: "严肃",
      ai_linked_plan: "关联安排",
      ai_plan_auto: "自动匹配最近安排",
      action_save: "保存",
      action_delete: "删除",
      action_edit: "编辑",
      action_test_ring: "测试响铃",
      alarm_empty: "暂无闹钟，点击右上角添加",
      alarm_enabled: "已开启",
      alarm_disabled: "已关闭",
      alarm_paused_today_chip: "今日暂停",
      untitled_alarm: "未命名闹钟",
      pause_today_title: "确认关闭今日所有闹钟？",
      pause_today_desc: "今日将不再响铃，明日自动恢复",
      action_confirm: "确认",
      smart_wake: "智能叫醒服务",
      voice_playing: "语音播放中",
      action_pause: "暂停",
      action_resume: "继续",
      action_replay: "重播",
      action_snooze: "稍后提醒",
      action_stop: "关闭",
      no_time_selected: "请选择时间",
      today_restore_ok: "今日闹钟已恢复",
      today_pause_ok: "今日闹钟已暂停",
      ring_plain_text: "铃声已响起，请及时起床。",
      ai_no_plan_serious: "请按时起床，保持高效作息。",
      ai_no_plan_energetic: "新的一天开始了，起床出发！",
      ai_no_plan_gentle: "早上好，今天也要顺利完成计划。",
      ai_line_serious: "请立刻起床。距离 {title} 仅剩 {min} 分钟。",
      ai_line_energetic: "冲呀！还有 {min} 分钟就到 {title}。",
      ai_line_gentle: "早上好！还有 {min} 分钟就要 {title} 了，快起床准备吧。",
      repeat_custom_text: "自定义({days})",
      no_alarms_yet: "暂无闹钟",
      test_ring: "测试响铃",

      plan_page_title: "计划安排",
      plan_page_subtitle: "今日 / 未来",
      tab_today: "今日计划",
      tab_future: "未来计划",
      add_plan: "新增计划",
      new_plan: "新增计划",
      edit_plan: "编辑计划",
      plan_title: "标题",
      plan_time: "时间",
      plan_remark: "备注",
      plan_priority: "优先级",
      priority_high: "高优先级",
      priority_medium: "中优先级",
      priority_low: "低优先级",
      plan_empty: "暂无计划，点击添加",
      required_title_time: "标题和时间必填",
      plans_updated: "计划已更新，并已联动 AI 叫醒",
      mark_done: "标记完成",

      me_title: "个人中心",
      me_subtitle: "数据同步与日志",
      not_logged_in: "未登录",
      guest_mode: "游客模式",
      device_id: "设备标识",
      sync_to_cloud: "同步到云端",
      pull_from_cloud: "从云端拉取",
      open_settings: "前往设置",
      sync_hint: "可通过修改 localStorage device id 模拟多设备登录",
      sync_logs: "同步日志",
      syncing: "正在同步数据...",
      no_logs: "暂无日志",
      sync_done: "同步完成",
      no_cloud_data: "云端暂无数据",
      cloud_applied: "云端数据已覆盖本地",
      sync_need_login: "请先登录账号后再使用云同步",
      log_upload: "上传云端",
      log_pull: "拉取云端",
      records_count: "{count} 条记录",

      settings_title: "设置",
      settings_subtitle: "通知、语言、账号、隐私、版本",
      notify: "消息通知",
      language: "语言",
      follow_system: "跟随系统",
      lang_chinese: "中文",
      lang_english: "English",
      dark_mode: "深色模式",
      dark_mode_hint: "关闭时跟随系统",
      profile: "个人资料",
      nickname: "昵称",
      phone: "手机号",
      bio: "简介",
      save_profile: "保存资料",
      switch_account: "切换账号",
      switch_account_hint: "仅显示未过期账号。单账号最多2台设备在线。",
      no_switchable_account: "暂无可切换账号",
      current_account: "当前账号",
      action_switch: "切换",
      expire_at: "有效期",
      account_security: "账号安全",
      clear_cache: "清除缓存",
      logout: "退出登录",
      about_us: "关于我们",
      user_agreement: "用户协议",
      privacy_policy: "隐私政策",
      version: "版本信息",
      action_view: "查看",
      action_clear: "清除",
      action_ok: "知道了",
      profile_saved: "个人资料已保存",
      switched_to: "已切换到 {account}",
      switch_failed: "切换失败",
      cache_cleared: "缓存已清除并重置示例数据",
      logged_out: "已退出登录",
      security_msg: "已启用设备上限控制：同账号最多 2 台设备在线。",
      about_msg: "BellMate 是聚焦闹钟、计划与AI叫醒的高保真原型。",
      terms_msg: "本原型仅用于演示，不采集真实个人信息。",
      privacy_msg: "数据默认保存在浏览器 localStorage，可随时清除。"
    },
    "en-US": {
      app_name: "BellMate",
      nav_alarm: "Alarm",
      nav_plan: "Plans",
      nav_me: "Me",
      nav_settings: "Settings",
      account_entry: "Account",
      status_paused_today: "Today's alarms paused, auto-restore at 00:00 tomorrow",
      action_restore: "Restore",
      action_undo: "Undo",
      login_success: "Login successful",
      logout_success: "Logged out",
      alarms_restored_today: "Today's alarms restored",
      alarms_paused_today: "Today's alarms paused. Auto-restore tomorrow",

      login_title: "Login",
      login_account: "Account",
      login_phone: "Phone",
      login_btn: "Login",
      login_phone_btn: "Login by phone",
      login_wechat: "WeChat Login",
      login_qq: "QQ Login",
      login_register: "Register",
      login_forgot: "Forgot Password",
      login_skip: "Continue as Guest",
      login_back: "Back to Login",
      field_account: "Account",
      field_password: "Password",
      field_phone: "Phone",
      field_code: "Code",
      field_new_password: "New Password",
      field_password_hint: "At least 6 chars",
      get_code: "Get code",
      register_title: "Register",
      register_submit: "Create account",
      forgot_title: "Reset Password",
      forgot_submit: "Reset",
      auth_login_title: "Authorize Login",
      auth_cancel: "Cancel",
      auth_confirm: "Authorize",
      auth_desc: "BellMate requests basic account profile information.",
      auth_wechat_title: "WeChat Authorize",
      auth_qq_title: "QQ Authorize",
      invalid_phone_code: "Invalid phone number or code",
      login_failed: "Login failed",
      register_invalid: "Registration data invalid",
      register_ok: "Registered. Please login.",
      reset_invalid: "Reset data invalid",
      reset_ok: "Password reset success",

      alarm_page_title: "Alarm List",
      alarm_page_subtitle: "Tap to edit / Long-press multi-delete / AI Wake",
      pull_refresh: "Pull down to refresh",
      pull_release: "Release to refresh",
      refreshing: "Refreshing...",
      add_alarm: "Add Alarm",
      new_alarm: "New Alarm",
      edit_alarm: "Edit Alarm",
      alarm_time: "Time",
      alarm_label: "Label",
      alarm_repeat: "Repeat",
      repeat_daily: "Daily",
      repeat_workday: "Workdays",
      repeat_custom: "Custom weekdays",
      weekdays: "Weekdays",
      alarm_ringtone: "Ringtone",
      ring_default: "Default",
      ring_bird: "Bird",
      ring_piano: "Piano",
      ai_wake: "AI Wake",
      ai_style: "Voice style",
      style_gentle: "Gentle",
      style_energetic: "Energetic",
      style_serious: "Serious",
      ai_linked_plan: "Linked schedule",
      ai_plan_auto: "Auto nearest schedule",
      action_save: "Save",
      action_delete: "Delete",
      action_edit: "Edit",
      action_test_ring: "Test ring",
      alarm_empty: "No alarms yet, tap top-right to add",
      alarm_enabled: "Enabled",
      alarm_disabled: "Disabled",
      alarm_paused_today_chip: "Paused today",
      untitled_alarm: "Untitled alarm",
      pause_today_title: "Pause all alarms for today?",
      pause_today_desc: "No alarm will ring today. Auto-restore tomorrow.",
      action_confirm: "Confirm",
      smart_wake: "Smart Wake Service",
      voice_playing: "Voice Playing",
      action_pause: "Pause",
      action_resume: "Resume",
      action_replay: "Replay",
      action_snooze: "Snooze",
      action_stop: "Stop",
      no_time_selected: "Please select a time",
      today_restore_ok: "Today's alarms restored",
      today_pause_ok: "Today's alarms paused",
      ring_plain_text: "Alarm is ringing. Please wake up.",
      ai_no_plan_serious: "Wake up now and keep your schedule.",
      ai_no_plan_energetic: "New day, let's go!",
      ai_no_plan_gentle: "Good morning, have a productive day.",
      ai_line_serious: "Wake up now. {title} starts in {min} minutes.",
      ai_line_energetic: "Let's go! {title} starts in {min} minutes.",
      ai_line_gentle: "Good morning! {title} starts in {min} minutes.",
      repeat_custom_text: "Custom({days})",
      no_alarms_yet: "No alarms yet",
      test_ring: "Test ring",

      plan_page_title: "Plan Schedule",
      plan_page_subtitle: "Today / Future",
      tab_today: "Today",
      tab_future: "Future",
      add_plan: "Add plan",
      new_plan: "New plan",
      edit_plan: "Edit plan",
      plan_title: "Title",
      plan_time: "Time",
      plan_remark: "Remark",
      plan_priority: "Priority",
      priority_high: "High",
      priority_medium: "Medium",
      priority_low: "Low",
      plan_empty: "No plans yet, tap add",
      required_title_time: "Title and time are required",
      plans_updated: "Plans updated and linked with AI wake",
      mark_done: "Toggle done",

      me_title: "Profile",
      me_subtitle: "Sync and logs",
      not_logged_in: "Not logged in",
      guest_mode: "Guest mode",
      device_id: "Device ID",
      sync_to_cloud: "Sync to cloud",
      pull_from_cloud: "Pull from cloud",
      open_settings: "Open settings",
      sync_hint: "Change localStorage device id to simulate multi-device login",
      sync_logs: "Sync Logs",
      syncing: "Syncing...",
      no_logs: "No logs",
      sync_done: "Sync done",
      no_cloud_data: "No cloud data",
      cloud_applied: "Cloud data applied locally",
      sync_need_login: "Please sign in to use cloud sync",
      log_upload: "Upload cloud",
      log_pull: "Pull cloud",
      records_count: "{count} records",

      settings_title: "Settings",
      settings_subtitle: "Notification, language, account, privacy, version",
      notify: "Notification",
      language: "Language",
      follow_system: "Follow system",
      lang_chinese: "Chinese",
      lang_english: "English",
      dark_mode: "Dark Mode",
      dark_mode_hint: "Off = follow system",
      profile: "Profile",
      nickname: "Nickname",
      phone: "Phone",
      bio: "Bio",
      save_profile: "Save profile",
      switch_account: "Switch Account",
      switch_account_hint: "Only unexpired accounts. Max 2 active devices per account.",
      no_switchable_account: "No switchable account",
      current_account: "Current",
      action_switch: "Switch",
      expire_at: "Expire",
      account_security: "Account Security",
      clear_cache: "Clear Cache",
      logout: "Logout",
      about_us: "About Us",
      user_agreement: "User Agreement",
      privacy_policy: "Privacy Policy",
      version: "Version",
      action_view: "View",
      action_clear: "Clear",
      action_ok: "OK",
      profile_saved: "Profile saved",
      switched_to: "Switched to {account}",
      switch_failed: "Switch failed",
      cache_cleared: "Cache cleared and sample data reset",
      logged_out: "Logged out",
      security_msg: "Device limit is enabled: at most 2 active devices per account.",
      about_msg: "BellMate is a high-fidelity prototype for alarms, plans and AI wake.",
      terms_msg: "This prototype is for demonstration only.",
      privacy_msg: "Data is stored in browser localStorage and can be cleared anytime."
    }
  };

  function locale() {
    if (window.BellMate && BellMate.getEffectiveLanguage) return BellMate.getEffectiveLanguage();
    const nav = (navigator.language || "zh-CN").toLowerCase();
    return nav.startsWith("en") ? "en-US" : "zh-CN";
  }

  function tpl(str, vars) {
    if (!vars) return str;
    return str.replace(/\{(\w+)\}/g, (_, key) => (vars[key] == null ? "" : String(vars[key])));
  }

  function t(key, vars) {
    const loc = locale();
    const table = dict[loc] || dict["zh-CN"];
    const fallback = dict["zh-CN"];
    const text = table[key] || fallback[key] || key;
    return tpl(text, vars);
  }

  function apply(root) {
    const target = root || document;
    target.querySelectorAll("[data-i18n]").forEach((el) => {
      el.textContent = t(el.dataset.i18n);
    });
    target.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
      el.setAttribute("placeholder", t(el.dataset.i18nPlaceholder));
    });
    target.querySelectorAll("[data-i18n-title]").forEach((el) => {
      el.setAttribute("title", t(el.dataset.i18nTitle));
    });
    target.querySelectorAll("[data-i18n-html]").forEach((el) => {
      el.innerHTML = t(el.dataset.i18nHtml);
    });
  }

  window.BellMateI18n = { t, apply, locale };
})();
